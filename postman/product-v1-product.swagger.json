{
  "swagger": "2.0",
  "info": {
    "title": "OmniPOS Product API",
    "description": "API for managing products, categories, and inventory",
    "version": "1.0",
    "contact": {
      "name": "OmniPOS API Support",
      "email": "api@omnipos.com"
    }
  },
  "tags": [
    {
      "name": "CategoryService"
    },
    {
      "name": "ProductService"
    },
    {
      "name": "ProductVariantService"
    }
  ],
  "schemes": [
    "http",
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/v1/categories": {
      "get": {
        "summary": "List Categories",
        "description": "List all categories with optional filtering",
        "operationId": "CategoryService_ListCategories",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/ListCategoriesResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "parentId",
            "description": "Filter by parent (empty = root categories)",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "isActive",
            "in": "query",
            "required": false,
            "type": "boolean"
          },
          {
            "name": "includeChildren",
            "description": "Include subcategories in tree structure",
            "in": "query",
            "required": false,
            "type": "boolean"
          }
        ],
        "tags": [
          "Categories"
        ]
      },
      "post": {
        "summary": "Create Category",
        "description": "Create a new product category",
        "operationId": "CategoryService_CreateCategory",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/CreateCategoryResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/CreateCategoryRequest"
            }
          }
        ],
        "tags": [
          "Categories"
        ]
      }
    },
    "/v1/categories/{id}": {
      "get": {
        "summary": "Get Category",
        "description": "Get category by ID",
        "operationId": "CategoryService_GetCategory",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/GetCategoryResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "Categories"
        ]
      },
      "delete": {
        "summary": "Delete Category",
        "description": "Delete a category",
        "operationId": "CategoryService_DeleteCategory",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "type": "object",
              "properties": {}
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "Categories"
        ]
      },
      "put": {
        "summary": "Update Category",
        "description": "Update category details",
        "operationId": "CategoryService_UpdateCategory",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/UpdateCategoryResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/UpdateCategoryBody"
            }
          }
        ],
        "tags": [
          "Categories"
        ]
      }
    },
    "/v1/products": {
      "get": {
        "summary": "List Products",
        "description": "List products with pagination and filtering",
        "operationId": "ProductService_ListProducts",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/ListProductsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "pageSize",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "categoryId",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "isActive",
            "in": "query",
            "required": false,
            "type": "boolean"
          },
          {
            "name": "sortBy",
            "description": "name, price, created_at",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "sortOrder",
            "description": "asc, desc",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "Products"
        ]
      },
      "post": {
        "summary": "Create Product",
        "description": "Create a new product",
        "operationId": "ProductService_CreateProduct",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/ProductResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/CreateProductRequest"
            }
          }
        ],
        "tags": [
          "Products"
        ]
      }
    },
    "/v1/products/reserve-stock": {
      "post": {
        "summary": "Reserve Stock",
        "description": "Synchronously reserve stock for an order",
        "operationId": "ProductService_ReserveStock",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/ReserveStockResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/ReserveStockRequest"
            }
          }
        ],
        "tags": [
          "Inventory"
        ]
      }
    },
    "/v1/products/search": {
      "get": {
        "summary": "Search Products",
        "description": "Search products by name, SKU, or barcode",
        "operationId": "ProductService_SearchProducts",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/ListProductsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "query",
            "description": "Search by name, SKU, barcode",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          }
        ],
        "tags": [
          "Products"
        ]
      }
    },
    "/v1/products/{id}": {
      "get": {
        "summary": "Get Product",
        "description": "Get product details by ID",
        "operationId": "ProductService_GetProduct",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/ProductResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "includeCategory",
            "in": "query",
            "required": false,
            "type": "boolean"
          },
          {
            "name": "includeVariants",
            "in": "query",
            "required": false,
            "type": "boolean"
          }
        ],
        "tags": [
          "Products"
        ]
      },
      "delete": {
        "summary": "Delete Product",
        "description": "Delete a product",
        "operationId": "ProductService_DeleteProduct",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "type": "object",
              "properties": {}
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "Products"
        ]
      },
      "put": {
        "summary": "Update Product",
        "description": "Update product details",
        "operationId": "ProductService_UpdateProduct",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/ProductResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/UpdateProductBody"
            }
          }
        ],
        "tags": [
          "Products"
        ]
      }
    },
    "/v1/products/{productId}/variants": {
      "get": {
        "summary": "List Product Variants",
        "description": "List all variants for a product",
        "operationId": "ProductVariantService_ListVariants",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/ListVariantsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "productId",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "Product Variants"
        ]
      },
      "post": {
        "summary": "Add Product Variant",
        "description": "Add a variant to a product",
        "operationId": "ProductVariantService_AddVariant",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/VariantResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "productId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/AddVariantBody"
            }
          }
        ],
        "tags": [
          "Product Variants"
        ]
      }
    },
    "/v1/products/{productId}/variants/{variantId}": {
      "delete": {
        "summary": "Delete Product Variant",
        "description": "Delete a variant",
        "operationId": "ProductVariantService_DeleteVariant",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "type": "object",
              "properties": {}
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "productId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "variantId",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "Product Variants"
        ]
      },
      "put": {
        "summary": "Update Product Variant",
        "description": "Update variant details",
        "operationId": "ProductVariantService_UpdateVariant",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/VariantResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "productId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "variantId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/UpdateVariantBody"
            }
          }
        ],
        "tags": [
          "Product Variants"
        ]
      }
    }
  },
  "definitions": {
    "AddVariantBody": {
      "type": "object",
      "properties": {
        "sku": {
          "type": "string"
        },
        "barcode": {
          "type": "string"
        },
        "variantName": {
          "type": "string"
        },
        "priceAdjustment": {
          "type": "number",
          "format": "double"
        },
        "costPrice": {
          "type": "number",
          "format": "double"
        }
      }
    },
    "Any": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "Category": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "merchantId": {
          "type": "string"
        },
        "parentId": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "imageUrl": {
          "type": "string"
        },
        "sortOrder": {
          "type": "integer",
          "format": "int32"
        },
        "isActive": {
          "type": "boolean"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time"
        },
        "children": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/Category"
          },
          "title": "For tree structure"
        }
      },
      "title": "Category messages"
    },
    "CreateCategoryRequest": {
      "type": "object",
      "properties": {
        "parentId": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "imageUrl": {
          "type": "string"
        },
        "sortOrder": {
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "CreateCategoryResponse": {
      "type": "object",
      "properties": {
        "category": {
          "$ref": "#/definitions/Category"
        }
      }
    },
    "CreateProductRequest": {
      "type": "object",
      "properties": {
        "categoryId": {
          "type": "string"
        },
        "sku": {
          "type": "string"
        },
        "barcode": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "basePrice": {
          "type": "number",
          "format": "double"
        },
        "costPrice": {
          "type": "number",
          "format": "double"
        },
        "taxRate": {
          "type": "number",
          "format": "double"
        },
        "hasVariants": {
          "type": "boolean"
        },
        "trackInventory": {
          "type": "boolean"
        },
        "imageUrl": {
          "type": "string"
        }
      }
    },
    "GetCategoryResponse": {
      "type": "object",
      "properties": {
        "category": {
          "$ref": "#/definitions/Category"
        }
      }
    },
    "Item": {
      "type": "object",
      "properties": {
        "productId": {
          "type": "string"
        },
        "variantId": {
          "type": "string"
        },
        "quantity": {
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "ListCategoriesResponse": {
      "type": "object",
      "properties": {
        "categories": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/Category"
          }
        },
        "total": {
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "ListProductsResponse": {
      "type": "object",
      "properties": {
        "products": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/Product"
          }
        },
        "total": {
          "type": "integer",
          "format": "int32"
        },
        "page": {
          "type": "integer",
          "format": "int32"
        },
        "pageSize": {
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "ListVariantsResponse": {
      "type": "object",
      "properties": {
        "variants": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/ProductVariant"
          }
        }
      }
    },
    "Product": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "merchantId": {
          "type": "string"
        },
        "categoryId": {
          "type": "string"
        },
        "sku": {
          "type": "string"
        },
        "barcode": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "basePrice": {
          "type": "number",
          "format": "double"
        },
        "costPrice": {
          "type": "number",
          "format": "double"
        },
        "taxRate": {
          "type": "number",
          "format": "double"
        },
        "hasVariants": {
          "type": "boolean"
        },
        "trackInventory": {
          "type": "boolean"
        },
        "imageUrl": {
          "type": "string"
        },
        "isActive": {
          "type": "boolean"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time"
        },
        "category": {
          "$ref": "#/definitions/Category",
          "title": "Populated if requested"
        },
        "variants": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/ProductVariant"
          },
          "title": "Populated if has_variants"
        },
        "inventoryCount": {
          "type": "integer",
          "format": "int32"
        }
      },
      "title": "Product messages"
    },
    "ProductResponse": {
      "type": "object",
      "properties": {
        "product": {
          "$ref": "#/definitions/Product"
        }
      }
    },
    "ProductVariant": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "productId": {
          "type": "string"
        },
        "sku": {
          "type": "string"
        },
        "barcode": {
          "type": "string"
        },
        "variantName": {
          "type": "string"
        },
        "priceAdjustment": {
          "type": "number",
          "format": "double"
        },
        "costPrice": {
          "type": "number",
          "format": "double"
        },
        "isActive": {
          "type": "boolean"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time"
        }
      }
    },
    "ReserveStockRequest": {
      "type": "object",
      "properties": {
        "orderId": {
          "type": "string"
        },
        "items": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/Item"
          }
        }
      }
    },
    "ReserveStockResponse": {
      "type": "object",
      "properties": {
        "success": {
          "type": "boolean"
        },
        "message": {
          "type": "string"
        }
      }
    },
    "Status": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/Any"
          }
        }
      }
    },
    "UpdateCategoryBody": {
      "type": "object",
      "properties": {
        "parentId": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "imageUrl": {
          "type": "string"
        },
        "sortOrder": {
          "type": "integer",
          "format": "int32"
        },
        "isActive": {
          "type": "boolean"
        }
      }
    },
    "UpdateCategoryResponse": {
      "type": "object",
      "properties": {
        "category": {
          "$ref": "#/definitions/Category"
        }
      }
    },
    "UpdateProductBody": {
      "type": "object",
      "properties": {
        "categoryId": {
          "type": "string"
        },
        "sku": {
          "type": "string"
        },
        "barcode": {
          "type": "string"
        },
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "basePrice": {
          "type": "number",
          "format": "double"
        },
        "costPrice": {
          "type": "number",
          "format": "double"
        },
        "taxRate": {
          "type": "number",
          "format": "double"
        },
        "trackInventory": {
          "type": "boolean"
        },
        "imageUrl": {
          "type": "string"
        },
        "isActive": {
          "type": "boolean"
        }
      }
    },
    "UpdateVariantBody": {
      "type": "object",
      "properties": {
        "sku": {
          "type": "string"
        },
        "barcode": {
          "type": "string"
        },
        "variantName": {
          "type": "string"
        },
        "priceAdjustment": {
          "type": "number",
          "format": "double"
        },
        "costPrice": {
          "type": "number",
          "format": "double"
        },
        "isActive": {
          "type": "boolean"
        }
      }
    },
    "VariantResponse": {
      "type": "object",
      "properties": {
        "variant": {
          "$ref": "#/definitions/ProductVariant"
        }
      }
    }
  },
  "securityDefinitions": {
    "Bearer": {
      "type": "apiKey",
      "description": "JWT token for authentication",
      "name": "Authorization",
      "in": "header"
    }
  },
  "security": [
    {
      "Bearer": []
    }
  ]
}
